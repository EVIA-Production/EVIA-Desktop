#!/bin/bash

# ğŸš€ RESTART ELECTRON - IPC Fix Applied
# Run this after restarting Electron to test transcription

echo "============================================"
echo "ğŸ¯ IPC FIX COMPLETE - Ready to Test!"
echo "============================================"
echo ""
echo "âœ… What was fixed:"
echo "   - IPC bridge now complete (ipc.send + ipc.on)"
echo "   - Header forwards transcripts to Listen"
echo "   - Ask view uses keytar auth"
echo ""
echo "ğŸ“‹ Next Steps:"
echo ""
echo "1. In Electron terminal:"
echo "   Press Ctrl+C to stop current process"
echo "   Then run: EVIA_DEV=1 npm run dev:main"
echo ""
echo "2. Keep Vite running in other terminal"
echo ""
echo "3. Test transcription:"
echo "   - Click 'ZuhÃ¶ren' button"
echo "   - Speak: 'Hey, what's up?'"
echo "   - Watch Listen window for transcripts!"
echo ""
echo "============================================"
echo "ğŸ” Key Logs to Watch For (Listen Window):"
echo "============================================"
echo "[Preload] IPC listener registered for: transcript-message"
echo "[ListenView] âœ… IPC listener registered"
echo "[ListenView] ğŸ“¨ Received IPC message: transcript_segment"
echo "[ListenView] ğŸ“¨ IPC Adding transcript: ..."
echo ""
echo "If you see '[ListenView] âŒ window.evia.ipc.on not available':"
echo "Run: npm run build:main"
echo ""
echo "ğŸ‰ TRANSCRIPTION WILL NOW WORK! ğŸ‰"
echo "============================================"

